<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crea tu Explorador</title>
    <!-- Stylesheets and Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,700&family=Slackey&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<!-- === NAME GENERATOR MODAL === -->
<div id="name-generator-modal" class="modal-overlay">
    <div class="modal-content">
        <h3>¡Tu Nombre de Explorador!</h3>
        <div id="name-spinner" class="name-display">Explorador Valiente</div>
        <button class="cta-button" onclick="spinNameGenerator()">¡Girar para un nombre nuevo!</button>
        <button class="cta-button" onclick="confirmName()">Confirmar Nombre</button>
    </div>
</div>
    
<body class="avatar-page">

    <!-- Static Background Layers -->
    <div class="background-layers">
        <img src="assets/index_background_back_layer.svg" id="back-layer" alt="Background back layer">
        <img src="assets/index_background_front_layer.svg" id="front-layer" alt="Background front layer">
    </div>

    <!-- Back Button -->
    <button class="back-button" onclick="goBack()">
        <span>&larr;</span> Volver
    </button>
    <script>
        function goBack() { window.history.back(); }
    </script>
    
    <!-- === NEW SINGLE CARD CONTAINER === -->
    <div class="creator-card">
        
        <!-- Main content area with the two columns -->
        <div class="creator-main-content">
            <!-- Column 1: The Avatar Preview -->
            <div class="avatar-preview">
                <div id="base-preview" class="avatar-layer"></div>
                <div id="clothing-preview" class="avatar-layer"></div>
                <div id="headwear-preview" class="avatar-layer"></div>
                <div id="eyewear-preview" class="avatar-layer"></div>
                <div id="accessory-preview" class="avatar-layer"></div>
            </div>
    
            <!-- Column 2: The Customization UI with Tabs -->
            <div class="avatar-customization">
                <!-- Tab Buttons -->
                <div class="tab-buttons">
                    <button class="tab-button" onclick="openTab('base')" id="btn-base"><img src="assets/icons/icon_face.svg" alt="Base"></button>
                    <button class="tab-button" onclick="openTab('clothing')" id="btn-clothing"><img src="assets/icons/icon_shirt.svg" alt="Clothing"></button>
                    <button class="tab-button" onclick="openTab('headwear')" id="btn-headwear"><img src="assets/icons/icon_hair.svg" alt="Headwear"></button>
                    <button class="tab-button" onclick="openTab('eyewear')" id="btn-eyewear"><img src="assets/icons/icon_glasses.svg" alt="Eyewear"></button>
                </div>
    
                <!-- The Tab Content Container -->
                <div class="tab-content-container">
    
                    <!-- Content for 'Base' Tab -->
                    <div id="content-base" class="tab-content">
                        <div class="option-group">
                            <h4>Elige tu Base</h4>
                            <div class="option-grid">
                                <img src="assets/avatar_base/base_01.svg" onclick="selectSvg('base', 'assets/avatar_base/base_01.svg')" alt="Base Avatar">
                            </div>
                            <div class="color-picker">
                                <p>Color de Piel:</p>
                                <div class="color-swatch" style="background-color: #D1FFB6;" onclick="changeColor('skin-parts', '#D1FFB6')"></div>
                                <div class="color-swatch" style="background-color: #FFDBAC;" onclick="changeColor('skin-parts', '#FFDBAC')"></div>
                                <div class="color-swatch" style="background-color: #A0522D;" onclick="changeColor('skin-parts', '#A0522D')"></div>
                            </div>
                        </div>
                    </div>
        
                    <!-- Content for 'Clothing' Tab -->
                    <div id="content-clothing" class="tab-content">
                        <div class="option-group">
                            <h4>Elige tu Ropa</h4>
                            
                            <div class="option-grid">
                                <img src="assets/avatar_clothing/shirt_vest_explorer.svg" onclick="selectClothing('shirt_vest_explorer.svg')" alt="Explorer Vest">
                                <img src="assets/avatar_clothing/blouse.svg" onclick="selectClothing('blouse.svg')" alt="Blouse">
                                <img src="assets/avatar_clothing/military_undershirt.svg" onclick="selectClothing('military_undershirt.svg')" alt="Military Undershirt">
                            </div>
                    
                            <!-- This is the wrapper for the Explorer Vest's color picker -->
                            <div id="picker-vest" class="color-picker-group hidden">
                                <div class="color-picker">
                                    <p>Color del Chaleco:</p>
                                    <div class="color-swatch" style="background-color: #BC7D64;" onclick="changeColor('vest-color', '#BC7D64')"></div>
                                    <div class="color-swatch" style="background-color: #4682B4;" onclick="changeColor('vest-color', '#4682B4')"></div>
                                </div>
                            </div>
                            
                            <!-- This is the wrapper for the Blouse's color picker -->
                            <div id="picker-blouse" class="color-picker-group hidden">
                                <div class="color-picker">
                                    <p>Color de la Blusa:</p>
                                    <div class="color-swatch" style="background-color: #E91E63;" onclick="changeColor('blouse-color', '#E91E63')"></div>
                                    <div class="color-swatch" style="background-color: #2196F3;" onclick="changeColor('blouse-color', '#2196F3')"></div>
                                    <div class="color-swatch" style="background-color: #4CAF50;" onclick="changeColor('blouse-color', '#4CAF50')"></div>
                                </div>
                            </div>
                    
                            <!-- The "Quitar" (Remove) button for clothing -->
                            <button class="remove-btn" onclick="selectClothing('')">Quitar Ropa</button>
                    
                        </div>
                    </div>
        
                    <!-- Content for 'Headwear' Tab -->
                    <div id="content-headwear" class="tab-content">
                        <div class="option-group">
                            <h4>Elige tu Peinado o Sombrero</h4>
                            
                            <div class="option-grid">
                                <!-- These now call the new selectHeadwear function -->
                                <img src="assets/avatar_headwear/hair_long_wavy.svg" onclick="selectHeadwear('hair_long_wavy.svg')" alt="Wavy Hair">
                                <img src="assets/avatar_headwear/hair_short_curly.svg" onclick="selectHeadwear('hair_short_curly.svg')" alt="Curly Hair">
                                <img src="assets/avatar_headwear/beanie_hat.svg" onclick="selectHeadwear('beanie_hat.svg')" alt="Beanie Hat">
                            </div>
                    
                            <!-- This is the wrapper for the Hair color picker -->
                            <div id="picker-hair" class="color-picker-group hidden">
                                <div class="color-picker">
                                    <p>Color del Pelo:</p>
                                    <div class="color-swatch" style="background-color: #262626;" onclick="changeColor('hair-color', '#262626')"></div>
                                    <div class="color-swatch" style="background-color: #94572B;" onclick="changeColor('hair-color', '#94572B')"></div>
                                    <div class="color-swatch" style="background-color: #FFD85C;" onclick="changeColor('hair-color', '#FFD85C')"></div>
                                    <div class="color-swatch" style="background-color: #AB1111;" onclick="changeColor('hair-color', '#AB1111')"></div>
                                    <div class="color-swatch" style="background-color: #C5C1C9;" onclick="changeColor('hair-color', '#C5C1C9')"></div>
                                </div>
                            </div>
                            
                            <!-- This is the wrapper for the Beanie's color picker -->
                            <div id="picker-beanie" class="color-picker-group hidden">
                                <div class="color-picker">
                                    <p>Colores del Gorro:</p>
                                    <div class="color-swatch" style="background-color: #6A0DAD;" onclick="changeColor('beanie-top-color', '#6A0DAD')"></div>
                                    <div class="color-swatch" style="background-color: #008000;" onclick="changeColor('beanie-brim-color', '#008000')"></div>
                                    <div class="color-swatch" style="background-color: #FF4500;" onclick="changeColor('beanie-flaps-color', '#FF4500')"></div>
                                </div>
                            </div>
                            
                            <!-- The "Quitar" (Remove) button for headwear -->
                            <button class="remove-btn" onclick="selectHeadwear('')">Quitar Sombrero</button>
                    
                        </div>
                    </div>
        
                    <!-- Content for 'Eyewear' Tab -->
                    <div id="content-eyewear" class="tab-content">
                        <div class="option-group">
                            <h4>Elige tus Gafas</h4>
                            
                            <div class="option-grid">
                                <!-- We need a new master function for eyewear now -->
                                <img src="assets/avatar_eyewear/glasses_round.svg" onclick="selectEyewear('glasses_round.svg')" alt="Round Glasses">
                                <!-- Add more glasses options here -->
                            </div>
                    
                            <!-- This is the wrapper for the glasses' color pickers -->
                            <div id="picker-glasses" class="color-picker-group hidden">
                                <!-- Color Picker for the FRAMES (Solid Colors) -->
                                <div class="color-picker">
                                    <p>Color del Marco:</p>
                                    <div class="color-swatch" style="background-color: #C0C0C0;" onclick="changeColor('frame-color', '#C0C0C0')"></div>
                                    <div class="color-swatch" style="background-color: #4A4A4A;" onclick="changeColor('frame-color', '#4A4A4A')"></div>
                                    <div class="color-swatch" style="background-color: #B8860B;" onclick="changeColor('frame-color', '#B8860B')"></div>
                                </div>
                    
                                <!-- Color Picker for the LENSES (Transparent Colors) -->
                                <div class="color-picker">
                                    <p>Color de los Lentes:</p>
                                    <!-- <<<< KEY CHANGE: We use rgba() for transparency >>>> -->
                                    <div class="color-swatch" style="background-color: rgba(50, 50, 50, 0.5);" onclick="changeColor('lens-color', 'rgba(50, 50, 50, 0.5)')"></div>
                                    <div class="color-swatch" style="background-color: rgba(100, 65, 35, 0.4);" onclick="changeColor('lens-color', 'rgba(100, 65, 35, 0.4)')"></div>
                                    <div class="color-swatch" style="background-color: rgba(33, 150, 243, 0.3);" onclick="changeColor('lens-color', 'rgba(33, 150, 243, 0.3)')"></div>
                                </div>
                            </div>
                            
                            <button class="remove-btn" onclick="selectEyewear('')">Quitar Gafas</button>
                        </div>
                    </div>
                
                </div> <!-- Closes .tab-content-container -->
            </div> <!-- Closes .avatar-customization -->
        </div> <!-- Closes .creator-main-content -->

        <!-- Final Action Button, now inside the card -->
        <div class="final-action">
            <button class="cta-button" onclick="saveAndStart()">¡Guardar y Empezar Aventura!</button>
        </div>

    </div> <!-- Closes .creator-card -->

    <!-- Main Avatar Logic Script -->
    <script src="avatar_script.js"></script>
</body>
</html>
